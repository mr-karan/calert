# Default values for calert.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- Application configuration block
# @default -- See below
app:
  # -- Address of the HTTP Server
  address: "0.0.0.0:6000"
  # -- Server timeout for HTTP requests
  server_timeout: "60s"
  # -- Whether to log incoming HTTP requests or not
  enable_request_logs: true
  # -- Log level. Use `debug` to enable verbose logging
  log: "info"

# -- Provider configuration for routing alerts to different Google Chat rooms.
# See [config.sample.toml](https://github.com/mr-karan/calert/blob/main/config.sample.toml) for more details
# @default -- `{}` (no providers configured)
providers: {}
  # prod_alerts:
  #   type: "google_chat" # Type of provider. Currently supported value is `google_chat`.
  #   endpoint: "https://chat.googleapis.com/v1/spaces/xxx/messages?key=key&token=token%3D" # Google Chat Webhook URL
  #   max_idle_conns:  50 # Max idle connections in the HTTP Client.
  #   timeout: "30s" # Timeout for making requests to Provider.
  #   proxy_url: "http://internal-squid-proxy.com:3128" # Specify `proxy_url` as your proxy endpoint to route all HTTP requests to the provider via a proxy.
  #   template: "static/message.tmpl" # Path to specify the message template path.
  #   thread_ttl: "12h" # Timeout to keep active alerts in memory. Once this TTL expires, a new thread will be created.
  #   dry_run: false

  # qa_alerts:
  #   endpoint: "https://chat.googleapis.com/v1/spaces/xxx/messages?key=key&token=token%3D"

  # dev_alerts:
  #   endpoint: "https://chat.googleapis.com/v1/spaces/xxx/messages?key=key&token=token%3D"
  #   template: "static/dev_alerts.tmpl"
  #   dry_run: true

# -- Custom message templates for alert formatting.
# Templates use Go templating syntax
# @default -- `{}` (no custom templates)
templates: {}
  # message.tmpl: |
  #   *({{.Labels.severity | toUpper }}) {{ .Labels.alertname | Title }} - {{.Status | Title }}*
  #   {{ range .Annotations.SortedPairs -}}
  #   {{ .Name | Title }}: {{ .Value}}
  #   {{ end -}}

  # dev_alerts.tmpl: |
  #   *({{.Labels.severity | toUpper }}) {{ .Labels.alertname | Title }} - {{.Status | Title }}*
  #   {{ range .Annotations.SortedPairs -}}
  #   {{ .Name | Title }}: {{ .Value}}
  #   {{ end -}}

# -- Number of pod replicas
replicaCount: 1

# -- Image configuration
image:
  # -- Image repository
  repository: ghcr.io/mr-karan/calert
  # -- Image tag (defaults to Chart appVersion)
  tag: "{{ .Chart.AppVersion }}"
  # -- Image pull policy
  pullPolicy: Always

# -- Arguments to pass to the calert binary
args:
- "--config=/app/config.toml"

# -- Override the name of the chart
nameOverride: ""
# -- Override the full name of the chart
fullnameOverride: ""

# -- Service configuration
service:
  # -- Service type
  type: ClusterIP
  # -- Service port
  port: 6000

# -- Ingress configuration
ingress:
  # -- Enable ingress
  enabled: false
  # -- Ingress class name (e.g., nginx, traefik, alb)
  ingressClassName: ""
  # -- Annotations for the Ingress resource
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
    # cert-manager.io/cluster-issuer: letsencrypt-prod
  # -- Hosts configuration
  hosts:
    - host: calert.example.com
      paths:
        - path: /
          pathType: Prefix
  # -- TLS configuration
  tls: []
    # - secretName: calert-tls
    #   hosts:
    #     - calert.example.com

# -- Resource limits and requests
resources:
  # -- Resource limits
  limits:
    cpu: 20m
    memory: 48Mi
  # -- Resource requests
  requests:
    cpu: 5m
    memory: 24Mi

# -- Priority class name for pod scheduling
priorityClassName: ""

# -- Node selector for pod assignment
nodeSelector: {}

# -- Tolerations for pod assignment
tolerations: []

# -- Affinity rules for pod assignment
affinity: {}

# -- Topology spread constraints for pod assignment
topologySpreadConstraints: []

# -- Annotations to add to the pod
podAnnotations: {}

# -- Container security context configuration
# @default -- See below
securityContext:
  # -- Enable container security context
  enabled: false
  # -- Run container in privileged mode
  privileged: false
  # -- Allow privilege escalation
  allowPrivilegeEscalation: false
  # -- Run as non-root user
  runAsNonRoot: true
  # -- User ID to run as
  runAsUser: 1001
  # -- Group ID to run as
  runAsGroup: 1001
  # -- Mount root filesystem as read-only
  readOnlyRootFilesystem: true
  # -- Seccomp profile configuration
  seccompProfile:
    type: RuntimeDefault
  # -- Windows-specific options
  windowsOptions:
    hostProcess: false
  # -- Linux capabilities
  capabilities:
    drop: ["ALL"]
    add: ["NET_BIND_SERVICE"]

# -- Pod security context configuration
# @default -- See below
podSecurityContext:
  # -- Enable pod security context
  enabled: false
  # -- Run as non-root user
  runAsNonRoot: true
  # -- User ID to run as
  runAsUser: 1001
  # -- Group ID to run as
  runAsGroup: 1001
  # -- Seccomp profile configuration
  seccompProfile:
    type: RuntimeDefault
  # -- Windows-specific options
  windowsOptions:
    hostProcess: false

# -- Liveness probe configuration
livenessProbe:
  # -- How often to perform the probe (seconds)
  periodSeconds: 60
  # -- Probe timeout (seconds)
  timeoutSeconds: 3

# -- Readiness probe configuration
readinessProbe:
  # -- How often to perform the probe (seconds)
  periodSeconds: 60
  # -- Probe timeout (seconds)
  timeoutSeconds: 3

# -- Startup probe configuration
startupProbe:
  # -- How often to perform the probe (seconds)
  periodSeconds: 10
  # -- Probe timeout (seconds)
  timeoutSeconds: 3
